<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bankly Command Center</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-dark: #0c0c10;
            --bg-main: #111116;
            --bg-card: #18181f;
            --bg-card-hover: #1e1e26;
            --border: rgba(255,255,255,0.06);
            --border-light: rgba(255,255,255,0.1);
            --text: #ffffff;
            --text-secondary: #71717a;
            --text-muted: #52525b;
            --accent: #8b5cf6;
            --accent-light: #a78bfa;
            --green: #22c55e;
            --green-bg: rgba(34,197,94,0.12);
            --yellow: #eab308;
            --yellow-bg: rgba(234,179,8,0.12);
            --red: #ef4444;
            --red-bg: rgba(239,68,68,0.12);
            --blue: #3b82f6;
            --blue-bg: rgba(59,130,246,0.12);
        }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg-main); color: var(--text); min-height: 100vh; display: flex; }
        
        /* SIDEBAR */
        .sidebar { width: 240px; background: var(--bg-dark); border-right: 1px solid var(--border); display: flex; flex-direction: column; position: fixed; height: 100vh; z-index: 100; }
        .sidebar-header { padding: 1.5rem; border-bottom: 1px solid var(--border); }
        .logo { display: flex; align-items: center; gap: 0.75rem; }
        .logo-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--accent), #ec4899); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
        .logo-text { font-size: 1.25rem; font-weight: 700; }
        .nav { flex: 1; padding: 1rem 0.75rem; overflow-y: auto; }
        .nav-section { margin-bottom: 1.5rem; }
        .nav-label { font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); padding: 0 0.75rem; margin-bottom: 0.5rem; }
        .nav-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.65rem 0.75rem; border-radius: 8px; cursor: pointer; color: var(--text-secondary); transition: all 0.15s; font-size: 0.875rem; margin-bottom: 2px; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: var(--text); }
        .nav-item.active { background: rgba(139,92,246,0.15); color: var(--accent-light); }
        .nav-icon { width: 18px; text-align: center; }
        .nav-badge { margin-left: auto; background: var(--red); color: white; font-size: 0.65rem; padding: 2px 6px; border-radius: 10px; font-weight: 600; }
        .sidebar-footer { padding: 1rem; border-top: 1px solid var(--border); }
        .status-pill { display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: var(--text-secondary); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--green); animation: pulse 2s infinite; }
        .status-dot.error { background: var(--red); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        /* MAIN */
        .main { flex: 1; margin-left: 240px; padding: 2rem; min-height: 100vh; }
        .page { display: none; }
        .page.active { display: block; }
        
        /* HEADER */
        .page-header { margin-bottom: 2rem; }
        .page-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 0.25rem; }
        .page-subtitle { color: var(--text-secondary); font-size: 0.875rem; }
        
        /* GRID */
        .grid { display: grid; gap: 1rem; }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        @media (max-width: 1400px) { .grid-4 { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 900px) { .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; } }
        
        /* CARDS */
        .card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; }
        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .card-title { font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); }
        .card-badge { font-size: 0.65rem; padding: 3px 8px; border-radius: 4px; font-weight: 500; }
        .card-badge.live { background: var(--green-bg); color: var(--green); }
        .card-badge.static { background: rgba(255,255,255,0.08); color: var(--text-secondary); }
        
        /* METRICS */
        .metric { margin-bottom: 0.5rem; }
        .metric-value { font-size: 2rem; font-weight: 700; line-height: 1.1; }
        .metric-value.gradient { background: linear-gradient(135deg, var(--accent), #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .metric-value.green { color: var(--green); }
        .metric-value.red { color: var(--red); }
        .metric-value.yellow { color: var(--yellow); }
        .metric-label { font-size: 0.8rem; color: var(--text-secondary); }
        
        /* PROGRESS */
        .progress { height: 6px; background: rgba(255,255,255,0.08); border-radius: 3px; overflow: hidden; margin-top: 0.75rem; }
        .progress-fill { height: 100%; border-radius: 3px; transition: width 0.5s ease; }
        .progress-fill.gradient { background: linear-gradient(90deg, var(--accent), #ec4899); }
        .progress-fill.green { background: var(--green); }
        .progress-fill.red { background: var(--red); }
        
        /* ALERTS & LOGS */
        .alert { padding: 0.875rem 1rem; border-radius: 8px; margin-bottom: 0.5rem; font-size: 0.85rem; display: flex; align-items: flex-start; gap: 0.75rem; }
        .alert-icon { flex-shrink: 0; }
        .alert-critical { background: var(--red-bg); border: 1px solid rgba(239,68,68,0.2); }
        .alert-critical .alert-icon { color: var(--red); }
        .alert-warning { background: var(--yellow-bg); border: 1px solid rgba(234,179,8,0.2); }
        .alert-warning .alert-icon { color: var(--yellow); }
        .alert-info { background: var(--blue-bg); border: 1px solid rgba(59,130,246,0.2); }
        .alert-info .alert-icon { color: var(--blue); }
        .alert-ok { background: var(--green-bg); border: 1px solid rgba(34,197,94,0.2); }
        .alert-ok .alert-icon { color: var(--green); }
        
        .log-item { display: flex; gap: 1rem; padding: 0.75rem 0; border-bottom: 1px solid var(--border); font-size: 0.85rem; }
        .log-item:last-child { border-bottom: none; }
        .log-time { color: var(--text-muted); min-width: 120px; font-family: monospace; font-size: 0.75rem; }
        .log-type { min-width: 80px; }
        .log-type.error { color: var(--red); }
        .log-type.event { color: var(--blue); }
        .log-type.warning { color: var(--yellow); }
        .log-message { flex: 1; color: var(--text-secondary); }
        .log-resolved { color: var(--green); font-size: 0.7rem; margin-left: 0.5rem; }
        .log-unresolved { color: var(--red); font-size: 0.7rem; margin-left: 0.5rem; }
        
        /* TABLES */
        .table-wrap { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        th { font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); text-align: left; padding: 0.75rem 1rem; border-bottom: 1px solid var(--border); }
        td { padding: 0.875rem 1rem; border-bottom: 1px solid var(--border); color: var(--text-secondary); }
        tr:hover td { background: rgba(255,255,255,0.02); }
        td:first-child { color: var(--text); font-weight: 500; }
        a { color: var(--accent-light); text-decoration: none; }
        a:hover { text-decoration: underline; }
        
        /* BADGES */
        .badge { display: inline-block; padding: 3px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: 600; }
        .badge-hot { background: var(--red-bg); color: var(--red); }
        .badge-warm { background: var(--yellow-bg); color: var(--yellow); }
        .badge-ok { background: var(--green-bg); color: var(--green); }
        .badge-blue { background: var(--blue-bg); color: var(--blue); }
        .badge-muted { background: rgba(255,255,255,0.08); color: var(--text-secondary); }
        
        /* SYSTEM PAGE */
        .system-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 1rem; }
        .system-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center; }
        .system-card.span-2 { grid-column: span 2; }
        .system-card.span-3 { grid-column: span 3; }
        .system-value { font-size: 2.5rem; font-weight: 800; margin: 0.5rem 0; }
        .system-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; }
        .system-sub { font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.25rem; }
        @media (max-width: 1200px) { .system-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) { .system-grid { grid-template-columns: repeat(2, 1fr); } .system-card.span-2, .system-card.span-3 { grid-column: span 1; } }
        
        /* API STATUS */
        .api-status { display: flex; align-items: center; gap: 1rem; padding: 1rem 1.25rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 10px; margin-bottom: 1.5rem; }
        .api-status-indicator { width: 10px; height: 10px; border-radius: 50%; }
        .api-status-indicator.online { background: var(--green); box-shadow: 0 0 10px var(--green); }
        .api-status-indicator.offline { background: var(--red); box-shadow: 0 0 10px var(--red); }
        .api-status-text { flex: 1; }
        .api-status-title { font-weight: 600; font-size: 0.9rem; }
        .api-status-sub { font-size: 0.75rem; color: var(--text-secondary); }
        
        /* SECTIONS */
        .section { margin-bottom: 2rem; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .section-title { font-size: 1rem; font-weight: 600; }
        
        /* PROVIDER CARDS */
        .provider-item { padding: 0.875rem; background: rgba(255,255,255,0.03); border-radius: 8px; margin-bottom: 0.5rem; }
        .provider-name { font-weight: 600; margin-bottom: 0.25rem; }
        .provider-name a { color: var(--text); }
        .provider-name a:hover { color: var(--accent-light); }
        .provider-meta { font-size: 0.75rem; color: var(--text-secondary); }
        .provider-item.danger { background: var(--red-bg); border: 1px solid rgba(239,68,68,0.2); }
        
        /* FUNNEL */
        .funnel-item { display: flex; align-items: center; gap: 1rem; padding: 0.75rem 0; border-bottom: 1px solid var(--border); }
        .funnel-item:last-child { border-bottom: none; }
        .funnel-stage { width: 120px; font-size: 0.85rem; }
        .funnel-count { width: 60px; font-weight: 700; font-size: 1.1rem; }
        .funnel-bar { flex: 1; height: 8px; background: rgba(255,255,255,0.08); border-radius: 4px; overflow: hidden; }
        .funnel-bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent), #ec4899); border-radius: 4px; }
        .funnel-conv { width: 60px; font-size: 0.75rem; color: var(--text-secondary); text-align: right; }
        
        /* IDEAS */
        .idea-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; margin-bottom: 1rem; }
        .idea-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .idea-title { font-size: 1.1rem; font-weight: 700; }
        .idea-codename { font-size: 0.75rem; color: var(--text-muted); }
        .idea-score { font-size: 1.5rem; font-weight: 800; }
        .idea-verdict { font-size: 0.65rem; color: var(--accent); text-transform: uppercase; letter-spacing: 0.05em; }
        .idea-desc { background: rgba(255,255,255,0.03); padding: 0.875rem; border-radius: 8px; margin-bottom: 1rem; }
        .idea-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-bottom: 1rem; }
        .idea-stat { background: rgba(255,255,255,0.03); padding: 0.75rem; border-radius: 6px; }
        .idea-stat-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.25rem; }
        .idea-stat-value { font-weight: 600; font-size: 0.9rem; }
        .idea-meta { font-size: 0.8rem; line-height: 1.6; }
        .idea-meta span { color: var(--text-muted); }
        @media (max-width: 900px) { .idea-grid { grid-template-columns: repeat(2, 1fr); } }
        
        /* MOBILE SIDEBAR */
        .mobile-toggle { display: none; position: fixed; bottom: 1rem; right: 1rem; width: 50px; height: 50px; background: var(--accent); border-radius: 50%; z-index: 200; cursor: pointer; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 4px 20px rgba(139,92,246,0.4); }
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); transition: transform 0.3s; }
            .sidebar.open { transform: translateX(0); }
            .main { margin-left: 0; padding: 1rem; }
            .mobile-toggle { display: flex; }
        }
        
        /* METRICS GRID */
        .metrics-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-top: 1rem; }
        .metric-item { background: rgba(255,255,255,0.03); padding: 0.75rem; border-radius: 8px; }
        .metric-item-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.25rem; }
        .metric-item-value { font-weight: 700; font-size: 1.1rem; }
        @media (max-width: 900px) { .metrics-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <div class="logo-icon">üè¶</div>
                <div class="logo-text">Bankly</div>
            </div>
        </div>
        <nav class="nav">
            <div class="nav-section">
                <div class="nav-label">System</div>
                <div class="nav-item active" data-page="system"><span class="nav-icon">‚ö°</span> Bankly System</div>
            </div>
            <div class="nav-section">
                <div class="nav-label">Operations</div>
                <div class="nav-item" data-page="overview"><span class="nav-icon">üìä</span> Overview</div>
                <div class="nav-item" data-page="leads"><span class="nav-icon">üî•</span> Leads <span class="nav-badge" id="navHotLeads">-</span></div>
                <div class="nav-item" data-page="pipeline"><span class="nav-icon">üìà</span> Pipeline</div>
                <div class="nav-item" data-page="groups"><span class="nav-icon">üí¨</span> TG Groups</div>
            </div>
            <div class="nav-section">
                <div class="nav-label">Intelligence</div>
                <div class="nav-item" data-page="hnwi"><span class="nav-icon">üíé</span> HNWI Contacts</div>
                <div class="nav-item" data-page="providers"><span class="nav-icon">üí≥</span> Providers</div>
                <div class="nav-item" data-page="competitors"><span class="nav-icon">üéØ</span> Competitors</div>
                <div class="nav-item" data-page="ideas"><span class="nav-icon">üí°</span> Ideas</div>
            </div>
        </nav>
        <div class="sidebar-footer">
            <div class="status-pill">
                <div class="status-dot" id="apiDot"></div>
                <span id="apiStatusText">Connecting...</span>
            </div>
        </div>
    </aside>

    <main class="main">
        <!-- SYSTEM PAGE -->
        <div class="page active" id="page-system">
            <div class="page-header">
                <h1 class="page-title">Bankly System</h1>
                <p class="page-subtitle">Full system status, errors, events, and metrics</p>
            </div>
            
            <div class="api-status" id="apiStatusBar">
                <div class="api-status-indicator" id="apiIndicator"></div>
                <div class="api-status-text">
                    <div class="api-status-title" id="apiTitle">Checking API...</div>
                    <div class="api-status-sub" id="apiSubtitle">mybankly.org</div>
                </div>
                <span class="card-badge live">LIVE</span>
            </div>

            <div class="system-grid">
                <div class="system-card span-2">
                    <div class="system-label">Total Users</div>
                    <div class="system-value" id="sysUsers" style="color: var(--accent)">‚Äî</div>
                    <div class="system-sub">of 1,000 goal</div>
                    <div class="progress" style="margin-top: 1rem;"><div class="progress-fill gradient" id="sysUsersProgress" style="width: 0%"></div></div>
                </div>
                <div class="system-card">
                    <div class="system-label">Active Cards</div>
                    <div class="system-value" id="sysCards" style="color: var(--green)">‚Äî</div>
                </div>
                <div class="system-card">
                    <div class="system-label">Frozen Cards</div>
                    <div class="system-value" id="sysFrozen" style="color: var(--red)">‚Äî</div>
                </div>
                <div class="system-card span-2">
                    <div class="system-label">Total Volume</div>
                    <div class="system-value" id="sysVolume" style="color: var(--text)">‚Äî</div>
                    <div class="system-sub" id="sysTxns">‚Äî transactions</div>
                </div>
                <div class="system-card span-2">
                    <div class="system-label">Total Deposits</div>
                    <div class="system-value" id="sysDeposits" style="color: var(--green)">‚Äî</div>
                </div>
                <div class="system-card">
                    <div class="system-label">Velocity</div>
                    <div class="system-value" id="sysVelocity">‚Äî</div>
                    <div class="system-sub" id="sysVelocitySub">‚Äî</div>
                </div>
                <div class="system-card">
                    <div class="system-label">Day</div>
                    <div class="system-value" id="sysDay">‚Äî</div>
                    <div class="system-sub">of 90</div>
                </div>
                <div class="system-card span-2">
                    <div class="system-label">Required Pace</div>
                    <div class="system-value" id="sysRequired">‚Äî</div>
                    <div class="system-sub" id="sysActual">actual: ‚Äî/day</div>
                </div>
            </div>

            <!-- SYSTEM METRICS -->
            <div class="section" style="margin-top: 2rem;">
                <div class="section-header"><h3 class="section-title">üìä System Metrics</h3></div>
                <div class="metrics-grid" id="systemMetrics"></div>
            </div>

            <!-- ERROR LOG -->
            <div class="section" style="margin-top: 2rem;">
                <div class="section-header"><h3 class="section-title">üî¥ Error Log</h3></div>
                <div class="card">
                    <div id="errorLog"></div>
                </div>
            </div>

            <!-- EVENT LOG -->
            <div class="section" style="margin-top: 1rem;">
                <div class="section-header"><h3 class="section-title">üìã Event Log</h3></div>
                <div class="card">
                    <div id="eventLog"></div>
                </div>
            </div>

            <!-- WARNINGS -->
            <div class="section" style="margin-top: 1rem;">
                <div class="section-header"><h3 class="section-title">‚ö†Ô∏è Active Warnings</h3></div>
                <div id="systemWarnings"></div>
            </div>
        </div>

        <!-- OVERVIEW PAGE -->
        <div class="page" id="page-overview">
            <div class="page-header">
                <h1 class="page-title">Overview</h1>
                <p class="page-subtitle">Key performance indicators</p>
            </div>
            
            <div class="grid grid-4">
                <div class="card">
                    <div class="card-header"><span class="card-title">Goal Progress</span></div>
                    <div class="metric">
                        <span class="metric-value gradient" id="ovUsers">‚Äî</span><span style="color: var(--text-muted); font-size: 1rem;">/1000</span>
                    </div>
                    <div class="metric-label">Day <span id="ovDay">‚Äî</span> of 90</div>
                    <div class="progress"><div class="progress-fill gradient" id="ovProgress" style="width: 0%"></div></div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">Velocity</span></div>
                    <div class="metric"><span class="metric-value" id="ovVelocity">‚Äî</span></div>
                    <div class="metric-label"><span id="ovActual">‚Äî</span>/day vs <span id="ovRequired">‚Äî</span> required</div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">Hot Leads</span></div>
                    <div class="metric"><span class="metric-value red" id="ovHotLeads">‚Äî</span></div>
                    <div class="metric-label"><span id="ovWarmLeads">‚Äî</span> warm ¬∑ <span id="ovConverted">‚Äî</span> converted</div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">HNWI Contacts</span></div>
                    <div class="metric"><span class="metric-value gradient" id="ovHNWI">‚Äî</span><span style="color: var(--text-muted); font-size: 1rem;">/500</span></div>
                    <div class="progress"><div class="progress-fill gradient" id="ovHNWIProgress" style="width: 0%"></div></div>
                </div>
            </div>

            <div class="grid grid-2" style="margin-top: 1rem;">
                <div class="card">
                    <div class="card-header"><span class="card-title">TG Groups</span></div>
                    <div class="metric"><span class="metric-value green" id="ovActiveGroups">‚Äî</span></div>
                    <div class="metric-label"><span id="ovForbiddenGroups">‚Äî</span> forbidden</div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">Outreach Status</span></div>
                    <div id="ovOutreach"></div>
                </div>
            </div>

            <div class="section" style="margin-top: 2rem;">
                <div class="section-header"><h3 class="section-title">Alerts</h3></div>
                <div id="overviewAlerts"></div>
            </div>
        </div>

        <!-- LEADS PAGE -->
        <div class="page" id="page-leads">
            <div class="page-header">
                <h1 class="page-title">Lead Pipeline</h1>
                <p class="page-subtitle" id="leadsSummary">‚Äî hot ¬∑ ‚Äî warm ¬∑ ‚Äî cold</p>
            </div>
            <div class="card">
                <div class="table-wrap">
                    <table>
                        <thead><tr><th>Lead</th><th>Platform</th><th>Topic</th><th>Status</th><th>Age</th></tr></thead>
                        <tbody id="leadsTable"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PIPELINE PAGE -->
        <div class="page" id="page-pipeline">
            <div class="page-header">
                <h1 class="page-title">Conversion Pipeline</h1>
                <p class="page-subtitle">User journey funnel</p>
            </div>
            <div class="card">
                <div id="funnelChart"></div>
            </div>
        </div>

        <!-- GROUPS PAGE -->
        <div class="page" id="page-groups">
            <div class="page-header">
                <h1 class="page-title">Telegram Groups</h1>
                <p class="page-subtitle" id="groupsSummary">‚Äî active ¬∑ ‚Äî forbidden</p>
            </div>
            <div class="card">
                <div class="table-wrap">
                    <table>
                        <thead><tr><th>Group</th><th>Language</th><th>Status</th></tr></thead>
                        <tbody id="groupsTable"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- HNWI PAGE -->
        <div class="page" id="page-hnwi">
            <div class="page-header">
                <h1 class="page-title">HNWI Contacts</h1>
                <p class="page-subtitle">High Net Worth Individual outreach ‚Äî full database</p>
            </div>
            
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header"><span class="card-title">Progress</span></div>
                    <div class="metric"><span class="metric-value gradient" id="hnwiTotal">‚Äî</span><span style="color: var(--text-muted); font-size: 1rem;">/500</span></div>
                    <div class="progress"><div class="progress-fill gradient" id="hnwiProgress" style="width: 0%"></div></div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">Segments</span></div>
                    <div id="hnwiSegments"></div>
                </div>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <div class="card-header"><span class="card-title">Full Contact Database</span></div>
                <div class="table-wrap">
                    <table>
                        <thead><tr><th>#</th><th>Company</th><th>Location</th><th>Phone</th><th>Website</th><th>Type</th><th>Source</th><th>Date</th><th>Notes</th></tr></thead>
                        <tbody id="hnwiContacts"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PROVIDERS PAGE -->
        <div class="page" id="page-providers">
            <div class="page-header">
                <h1 class="page-title">Card Providers</h1>
                <p class="page-subtitle">B2B provider intelligence ‚Äî all links clickable</p>
            </div>
            
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header"><span class="card-title">‚úÖ Verified Providers</span></div>
                    <div id="verifiedProviders"></div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">üè∑Ô∏è White-Label Options</span></div>
                    <div id="whiteLabelProviders"></div>
                </div>
            </div>
            
            <div class="grid grid-2" style="margin-top: 1rem;">
                <div class="card">
                    <div class="card-header"><span class="card-title">üè¶ BIN Sponsors</span></div>
                    <div id="binSponsors"></div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">üî¥ Red Flags ‚Äî DO NOT USE</span></div>
                    <div id="redFlagProviders"></div>
                </div>
            </div>
        </div>

        <!-- COMPETITORS PAGE -->
        <div class="page" id="page-competitors">
            <div class="page-header">
                <h1 class="page-title">Competitor Analysis</h1>
                <p class="page-subtitle">Market intelligence ‚Äî all links clickable</p>
            </div>
            
            <div class="card">
                <div class="table-wrap">
                    <table>
                        <thead><tr><th>Name</th><th>Telegram</th><th>Instagram</th><th>Twitter</th><th>Strength</th></tr></thead>
                        <tbody id="competitorsTable"></tbody>
                    </table>
                </div>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <div class="card-header"><span class="card-title">Key Insights</span></div>
                <div id="competitorInsights"></div>
            </div>
        </div>

        <!-- IDEAS PAGE -->
        <div class="page" id="page-ideas">
            <div class="page-header">
                <h1 class="page-title">Startup Ideas</h1>
                <p class="page-subtitle">Scalable business opportunities</p>
            </div>
            <div id="ideasList"></div>
        </div>
    </main>

    <div class="mobile-toggle" onclick="document.getElementById('sidebar').classList.toggle('open')">‚ò∞</div>

    <script>
        const API_URL = 'https://mybankly.org/api/system';
        const API_KEY = 'sk-bankly-ce015eb6b293534a266c9003e829a7f68ce7249f7be12cff14c61805c359c1b6';
        const DATA_URL = 'data.json';
        
        let apiData = null;
        let staticData = null;

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const page = item.dataset.page;
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                item.classList.add('active');
                document.getElementById('page-' + page).classList.add('active');
                document.getElementById('sidebar').classList.remove('open');
            });
        });

        // Fetch live API data
        async function fetchAPI() {
            try {
                const res = await fetch(API_URL, { headers: { 'Authorization': 'Bearer ' + API_KEY } });
                if (!res.ok) throw new Error('API ' + res.status);
                apiData = await res.json();
                updateSystemPage();
                setAPIStatus(true, 'Connected', new Date().toLocaleTimeString());
            } catch (e) {
                setAPIStatus(false, 'Stealth Mode', 'Using cached data');
                if (staticData?.kpis) {
                    apiData = { users: staticData.kpis.totalUsers, cards: staticData.kpis.activeCards, frozen: staticData.kpis.frozenCards, volume: staticData.kpis.totalVolume, deposits: staticData.kpis.totalDeposits, transactions: staticData.kpis.transactions };
                    updateSystemPage();
                }
            }
        }

        function setAPIStatus(online, title, sub) {
            document.getElementById('apiDot').className = 'status-dot' + (online ? '' : ' error');
            document.getElementById('apiIndicator').className = 'api-status-indicator ' + (online ? 'online' : 'offline');
            document.getElementById('apiTitle').textContent = title;
            document.getElementById('apiSubtitle').textContent = sub;
            document.getElementById('apiStatusText').textContent = online ? 'Live' : 'Cached';
        }

        function updateSystemPage() {
            if (!apiData && !staticData?.kpis) return;
            const users = apiData?.users || staticData?.kpis?.totalUsers || 0;
            const cards = apiData?.cards || staticData?.kpis?.activeCards || 0;
            const frozen = apiData?.frozen || staticData?.kpis?.frozenCards || 0;
            const volume = apiData?.volume || staticData?.kpis?.totalVolume || 0;
            const deposits = apiData?.deposits || staticData?.kpis?.totalDeposits || 0;
            const txns = apiData?.transactions || staticData?.kpis?.transactions || 0;
            const day = staticData?.kpis?.dayOfGoal || 16;
            
            const requiredPace = ((1000 - users) / (90 - day)).toFixed(1);
            const actualPace = (users / day).toFixed(1);
            const velocity = (actualPace / requiredPace).toFixed(2);

            document.getElementById('sysUsers').textContent = users;
            document.getElementById('sysUsersProgress').style.width = (users / 10) + '%';
            document.getElementById('sysCards').textContent = cards;
            document.getElementById('sysFrozen').textContent = frozen;
            document.getElementById('sysVolume').textContent = '$' + (volume / 1000).toFixed(0) + 'K';
            document.getElementById('sysTxns').textContent = txns + ' transactions';
            document.getElementById('sysDeposits').textContent = '$' + (deposits / 1000).toFixed(0) + 'K';
            document.getElementById('sysDay').textContent = day;
            document.getElementById('sysVelocity').textContent = velocity + 'x';
            document.getElementById('sysVelocity').style.color = velocity < 0.5 ? 'var(--red)' : velocity < 1 ? 'var(--yellow)' : 'var(--green)';
            document.getElementById('sysVelocitySub').textContent = velocity < 1 ? 'Behind target' : 'On track';
            document.getElementById('sysRequired').textContent = requiredPace + '/day';
            document.getElementById('sysActual').textContent = 'actual: ' + actualPace + '/day';

            // System metrics
            if (staticData?.system?.metrics) {
                const m = staticData.system.metrics;
                document.getElementById('systemMetrics').innerHTML = `
                    <div class="metric-item"><div class="metric-item-label">Decline Rate</div><div class="metric-item-value" style="color:var(--red)">${m.declineRate}</div></div>
                    <div class="metric-item"><div class="metric-item-label">Email Verification</div><div class="metric-item-value" style="color:var(--yellow)">${m.emailVerificationRate}</div></div>
                    <div class="metric-item"><div class="metric-item-label">First Deposit</div><div class="metric-item-value" style="color:var(--yellow)">${m.firstDepositRate}</div></div>
                    <div class="metric-item"><div class="metric-item-label">DAU/MAU</div><div class="metric-item-value" style="color:var(--green)">${m.dauMau}</div></div>
                `;
            }

            // Error log
            if (staticData?.system?.errors) {
                document.getElementById('errorLog').innerHTML = staticData.system.errors.map(e => `
                    <div class="log-item">
                        <div class="log-time">${e.time}</div>
                        <div class="log-type error">${e.type.toUpperCase()}</div>
                        <div class="log-message">${e.user ? '[User ' + e.user + '] ' : ''}${e.message}
                            ${e.resolved ? '<span class="log-resolved">‚úì RESOLVED</span>' : '<span class="log-unresolved">‚ö† OPEN</span>'}
                        </div>
                    </div>
                `).join('');
            }

            // Event log
            if (staticData?.system?.events) {
                document.getElementById('eventLog').innerHTML = staticData.system.events.map(e => `
                    <div class="log-item">
                        <div class="log-time">${e.time}</div>
                        <div class="log-type event">EVENT</div>
                        <div class="log-message">${e.event}</div>
                    </div>
                `).join('');
            }

            // Warnings
            if (staticData?.system?.warnings) {
                document.getElementById('systemWarnings').innerHTML = staticData.system.warnings.map(w => `
                    <div class="alert alert-warning"><span class="alert-icon">‚ö†Ô∏è</span><span>${w}</span></div>
                `).join('');
            }
        }

        // Fetch static data
        async function fetchStaticData() {
            try {
                const res = await fetch(DATA_URL + '?t=' + Date.now());
                if (res.ok) {
                    staticData = await res.json();
                    updateAllPages();
                }
            } catch (e) { console.error('Static data error:', e); }
        }

        function updateAllPages() {
            if (!staticData) return;
            
            // Update system page with static data
            updateSystemPage();
            
            // Alerts
            if (staticData.alerts) {
                const alertsHtml = staticData.alerts.map(a => `
                    <div class="alert alert-${a.type}">
                        <span class="alert-icon">${a.type === 'critical' ? 'üî¥' : '‚ö†Ô∏è'}</span>
                        <span>${a.message}</span>
                    </div>
                `).join('');
                document.getElementById('overviewAlerts').innerHTML = alertsHtml;
            }

            // Overview
            const k = staticData.kpis;
            if (k) {
                const day = k.dayOfGoal || 16;
                const users = k.totalUsers || 0;
                const requiredPace = ((1000 - users) / (90 - day)).toFixed(1);
                const actualPace = (users / day).toFixed(1);
                const velocity = (actualPace / requiredPace).toFixed(2);

                document.getElementById('ovUsers').textContent = users;
                document.getElementById('ovDay').textContent = day;
                document.getElementById('ovProgress').style.width = (users / 10) + '%';
                document.getElementById('ovVelocity').textContent = velocity + 'x';
                document.getElementById('ovVelocity').style.color = velocity < 0.5 ? 'var(--red)' : velocity < 1 ? 'var(--yellow)' : 'var(--green)';
                document.getElementById('ovActual').textContent = actualPace;
                document.getElementById('ovRequired').textContent = requiredPace;
            }

            // Leads
            if (staticData.leads) {
                document.getElementById('navHotLeads').textContent = staticData.leads.hot;
                document.getElementById('ovHotLeads').textContent = staticData.leads.hot;
                document.getElementById('ovWarmLeads').textContent = staticData.leads.warm;
                document.getElementById('ovConverted').textContent = staticData.leads.converted || 0;
                document.getElementById('leadsSummary').textContent = `${staticData.leads.hot} hot ¬∑ ${staticData.leads.warm} warm ¬∑ ${staticData.leads.cold} cold`;
                
                if (staticData.leads.list) {
                    document.getElementById('leadsTable').innerHTML = staticData.leads.list.map(l => `
                        <tr>
                            <td>${l.name}</td>
                            <td>${l.platform}</td>
                            <td>${l.topic}</td>
                            <td><span class="badge badge-${l.status === 'replied' ? 'ok' : l.status === 'cta_sent' ? 'blue' : 'warm'}">${l.status}</span></td>
                            <td>${l.days}d</td>
                        </tr>
                    `).join('');
                }
            }

            // Groups
            if (staticData.groups) {
                document.getElementById('ovActiveGroups').textContent = staticData.groups.active;
                document.getElementById('ovForbiddenGroups').textContent = staticData.groups.forbidden;
                document.getElementById('groupsSummary').textContent = `${staticData.groups.active} active ¬∑ ${staticData.groups.forbidden} forbidden`;
                
                if (staticData.groups.list) {
                    document.getElementById('groupsTable').innerHTML = staticData.groups.list.map(g => `
                        <tr>
                            <td>${g.name}</td>
                            <td>${g.lang}</td>
                            <td><span class="badge badge-${g.status === 'best' || g.status === 'hot' ? 'hot' : g.status === 'active' || g.status === 'ok' ? 'ok' : 'muted'}">${g.status}</span></td>
                        </tr>
                    `).join('');
                }
            }

            // HNWI - FULL DATA
            if (staticData.hnwi) {
                document.getElementById('ovHNWI').textContent = staticData.hnwi.total;
                document.getElementById('ovHNWIProgress').style.width = (staticData.hnwi.total / 5) + '%';
                document.getElementById('hnwiTotal').textContent = staticData.hnwi.total;
                document.getElementById('hnwiProgress').style.width = (staticData.hnwi.total / 5) + '%';
                
                if (staticData.hnwi.segments) {
                    document.getElementById('hnwiSegments').innerHTML = staticData.hnwi.segments.map(s => `
                        <div style="display:flex;justify-content:space-between;padding:0.5rem 0;border-bottom:1px solid var(--border)">
                            <span>${s.name}</span>
                            <span><strong>${s.count}</strong> <span class="badge badge-${s.status === 'active' ? 'ok' : s.status === 'next' ? 'blue' : 'muted'}">${s.status}</span></span>
                        </div>
                    `).join('');
                }
                
                // FULL HNWI TABLE
                if (staticData.hnwi.contacts) {
                    document.getElementById('hnwiContacts').innerHTML = staticData.hnwi.contacts.map(c => `
                        <tr>
                            <td>${c.id}</td>
                            <td><strong>${c.company}</strong></td>
                            <td>${c.location}</td>
                            <td>${c.phone}</td>
                            <td>${c.website ? '<a href="' + c.website + '" target="_blank">' + c.website.replace('https://','') + '</a>' : '-'}</td>
                            <td><span class="badge badge-blue">${c.type}</span></td>
                            <td>${c.source}</td>
                            <td>${c.date}</td>
                            <td>${c.notes || '-'}</td>
                        </tr>
                    `).join('');
                }
            }

            // Outreach
            if (staticData.outreach) {
                document.getElementById('ovOutreach').innerHTML = `
                    <div class="metric"><span class="metric-value ${staticData.outreach.status === 'blocked' ? 'red' : 'green'}">${staticData.outreach.status.toUpperCase()}</span></div>
                    <div class="metric-label">${staticData.outreach.blocker || 'OK'} ¬∑ ${staticData.outreach.emailsReady} emails ready ¬∑ ${staticData.outreach.hnwiQueue} HNWI in queue</div>
                `;
            }

            // Funnel
            if (staticData.funnel?.stages) {
                const max = Math.max(...staticData.funnel.stages.map(s => s.count));
                document.getElementById('funnelChart').innerHTML = staticData.funnel.stages.map(s => `
                    <div class="funnel-item">
                        <div class="funnel-stage">${s.stage.replace(/_/g, ' ')}</div>
                        <div class="funnel-count">${s.count}</div>
                        <div class="funnel-bar"><div class="funnel-bar-fill" style="width:${(s.count/max*100)}%"></div></div>
                        <div class="funnel-conv">${s.conversion || ''}</div>
                    </div>
                `).join('');
            }

            // Providers - WITH LINKS
            if (staticData.providers) {
                document.getElementById('verifiedProviders').innerHTML = staticData.providers.verified.map(p => `
                    <div class="provider-item">
                        <div class="provider-name"><a href="${p.website}" target="_blank">${p.name} ‚Üó</a></div>
                        <div class="provider-meta">${p.type} ¬∑ ${p.region} ${p.funding ? '¬∑ ' + p.funding : ''}</div>
                        <div class="provider-meta" style="margin-top:0.25rem">${p.notes}</div>
                    </div>
                `).join('');
                
                document.getElementById('whiteLabelProviders').innerHTML = staticData.providers.whiteLabel.map(p => `
                    <div class="provider-item">
                        <div class="provider-name"><a href="${p.website}" target="_blank">${p.name} ‚Üó</a></div>
                        <div class="provider-meta">${p.service}</div>
                        <div class="provider-meta" style="margin-top:0.25rem">${p.notes}</div>
                    </div>
                `).join('');
                
                document.getElementById('binSponsors').innerHTML = staticData.providers.binSponsors.map(p => `
                    <div class="provider-item">
                        <div class="provider-name"><a href="${p.website}" target="_blank">${p.name} ‚Üó</a></div>
                        <div class="provider-meta">${p.region} ¬∑ ${p.cards}</div>
                        <div class="provider-meta" style="margin-top:0.25rem">${p.notes}</div>
                    </div>
                `).join('');
                
                document.getElementById('redFlagProviders').innerHTML = staticData.providers.redFlags.map(p => `
                    <div class="provider-item danger">
                        <div class="provider-name">üî¥ ${p.website ? '<a href="' + p.website + '" target="_blank">' + p.name + ' ‚Üó</a>' : p.name}</div>
                        <div class="provider-meta">${p.reason}</div>
                    </div>
                `).join('');
            }

            // Competitors - WITH LINKS
            if (staticData.competitors) {
                document.getElementById('competitorsTable').innerHTML = staticData.competitors.list.map(c => `
                    <tr>
                        <td><a href="${c.website}" target="_blank">${c.name} ‚Üó</a></td>
                        <td>${c.tg}</td>
                        <td>${c.ig}</td>
                        <td>${c.twitter}</td>
                        <td>${c.strength}</td>
                    </tr>
                `).join('');
                
                document.getElementById('competitorInsights').innerHTML = staticData.competitors.insights.map(i => `
                    <div class="alert alert-info"><span class="alert-icon">üí°</span><span>${i}</span></div>
                `).join('');
            }

            // Ideas
            if (staticData.businessIdeas) {
                document.getElementById('ideasList').innerHTML = staticData.businessIdeas.map(idea => `
                    <div class="idea-card">
                        <div class="idea-header">
                            <div>
                                <div class="idea-title">#${idea.id} ${idea.name}</div>
                                <div class="idea-codename">${idea.codename}</div>
                            </div>
                            <div style="text-align:right">
                                <div class="idea-score" style="color: ${idea.score.startsWith('9') ? 'var(--green)' : idea.score.startsWith('8') ? 'var(--accent)' : 'var(--yellow)'}">${idea.score}</div>
                                <div class="idea-verdict">${idea.verdict}</div>
                            </div>
                        </div>
                        <div class="idea-desc">
                            <div style="font-weight:600;margin-bottom:0.5rem">üí° ${idea.what}</div>
                            <div style="color:var(--text-secondary)">üéØ ${idea.problem}</div>
                        </div>
                        <div class="idea-grid">
                            <div class="idea-stat">
                                <div class="idea-stat-label">TAM</div>
                                <div class="idea-stat-value">${idea.market.tam}</div>
                            </div>
                            <div class="idea-stat">
                                <div class="idea-stat-label">LTV/CAC</div>
                                <div class="idea-stat-value" style="color:var(--green)">${idea.economics.ltvCac}</div>
                            </div>
                            <div class="idea-stat">
                                <div class="idea-stat-label">MVP</div>
                                <div class="idea-stat-value">${idea.mvp}</div>
                            </div>
                            <div class="idea-stat">
                                <div class="idea-stat-label">Margin</div>
                                <div class="idea-stat-value">${idea.economics.margin}</div>
                            </div>
                        </div>
                        <div class="idea-meta">
                            <div><span>Audience:</span> ${idea.audience}</div>
                            <div><span>Competitors:</span> ${idea.competitors}</div>
                            <div><span>Moat:</span> ${idea.moat}</div>
                            <div style="color:var(--accent);margin-top:0.5rem">üë§ ${idea.suitableFor}</div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Init
        fetchStaticData();
        fetchAPI();
        setInterval(fetchAPI, 60000);
    </script>
</body>
</html>
